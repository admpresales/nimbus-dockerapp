# This section contains your application metadata.
# Version of the application
version: "19.1.2"
# Name of the application
name: sca
# A short description of the application
description: "Fortify Source Code Analyzer (SCA) for Nimbus"
# Namespace to use when pushing to a registry. This is typically your Hub username.
namespace: "admpresales"
# List of application maitainers with name and email for each
maintainers:
  - name: Jason Hrabi
    email: jason.hrabi@microfocus.com
# Specify false here if your application doesn't support Swarm or Kubernetes
targets:
  swarm: false
  kubernetes: false

---
# This section contains the Compose file that describes your application services.
version: '3.5'
services:
  sca:
    image: ${SCA_IMAGE}:${SCA_TAG}
    container_name: ${SCA_CONTAINER_NAME}
    networks:
        demo-net:
    extra_hosts:
        - "nimbusserver.aos.com:172.50.0.1"
        - "nimbusserver:172.50.0.1"
    volumes:
        - fortify:/opt/Fortify
  devtools:
    image: ${DEVTOOLS_IMAGE}:${DEVTOOLS_TAG}
    container_name: ${DEVTOOLS_CONTAINER_NAME}
    command: ln -s ${SCA_HOME}/bin/sourceanalyzer /usr/sbin/sourceanalyzer && tail -f /dev/null
    environment:
        - SCA_HOME:/opt/Fortify/Fortify_SCA_and_Apps_${SCA_TAG}
    networks:
        demo-net:
    extra_hosts:
        - "nimbusserver.aos.com:172.50.0.1"
        - "nimbusserver:172.50.0.1"
    depends_on:
        - sca
    volumes:
        - fortify:/opt/Fortify

networks:
   demo-net:
     external: true

volumes:
    fortify:

---
# This section contains the default values for your application settings.
SCA_TAG: "19.1.2"
SCA_CONTAINER_NAME: sca
SCA_IMAGE: admpresales/sca
DEVTOOLS_CONTAINER_NAME: sca-devtools
DEVTOOLS_IMAGE: admpresales/devtools
DEVTOOLS_TAG: "2.0"